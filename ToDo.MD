
# üöú Anotee Refactoring Roadmap

## üìã –ü–ª–∞–Ω –î–µ–π—Å—Ç–≤–∏–π

## üöÄ –≠—Ç–∞–ø VII: SaaS –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Contextual Permissions)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üöë –≠—Ç–∞–ø VIII: –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –∏ –û—á–∏—Å—Ç–∫–∞ (Security Cleanup)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üõë –≠—Ç–∞–ø IX: Critical Refactoring & Bug Fixes (–ó–∞–≤–µ—Ä—à–µ–Ω)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üíÄ –≠—Ç–∞–ø X: Technical Debt & Critical Fixes (–ó–∞–≤–µ—Ä—à–µ–Ω)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üßπ –≠—Ç–∞–ø XI: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –î—ã—Ä
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üõ°Ô∏è –≠—Ç–∞–ø XII: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## ü©π –≠—Ç–∞–ø XIII: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø–æ–ª–∏—Ä–æ–≤–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üèóÔ∏è –≠—Ç–∞–ø XIV: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ß–∏—Å—Ç–∫–∞ –∏ –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –ü–ª–µ–µ—Ä–∞
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üö¶ –≠—Ç–∞–ø XV: User Onboarding & Workflow
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üêõ –≠—Ç–∞–ø XVI: Fixes & Critical Stabilization
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üöÄ –≠—Ç–∞–ø XVII: Architecture Hardening (JWT & Caching)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üí≥ –≠—Ç–∞–ø XVIII: Billing & Admin Infrastructure
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üíé –≠—Ç–∞–ø XIX: Final Stabilization & Release Polish
**–°—Ç–∞—Ç—É—Å:** üü° **–í –ø—Ä–æ—Ü–µ—Å—Å–µ (Active)**

## üß™ –≠—Ç–∞–ø XX: Automated Testing & QA Infrastructure
**–°—Ç–∞—Ç—É—Å:** üìÖ **–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ**

## üá∑üá∫ –≠—Ç–∞–ø XXI: –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –†–§ (RF Resilience)
**–°—Ç–∞—Ç—É—Å:** üü° **–í –ø—Ä–æ—Ü–µ—Å—Å–µ (Cloudflare Config)**

## üì¶ –≠—Ç–∞–ø XXII: BYOS (Bring Your Own Storage) & S3
**–°—Ç–∞—Ç—É—Å:** üöÄ **–í –ø—Ä–æ—Ü–µ—Å—Å–µ (–ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ü–ª–µ–µ—Ä)**

–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ S3-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â (Yandex, Selectel, Cloudflare R2) —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º Google Drive –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞.

### 1. üóÑÔ∏è Database & Security (Backend)
- [x] **Schema:** –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `storage_credentials` (`user_id`, `provider`, `config`, `is_active`).
- [x] **Encryption:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ `Secret Access Key` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (AES-256). –ö–ª—é—á–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ.
- [x] **API:** –°–æ–∑–¥–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
    - `GET /api/storage/config`: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ (–±–µ–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤).
    - `POST /api/storage/config`: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫.
    - [x] `POST /api/storage/test`: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (List Buckets/HeadBucket).

### 2. üîå S3 Service Adapter (Logic)
- [x] **Presigned URLs:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –¥–ª—è:
    - **Upload (PUT):** –ü—Ä—è–º–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –≤ S3.
    - **Download (GET):** –°—Ç—Ä–∏–º–∏–Ω–≥ –≤–∏–¥–µ–æ –≤ –ø–ª–µ–µ—Ä.
- [x] **CORS Config:** –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é (JSON/XML) –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS –≤ –±–∞–∫–µ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–ª—è —Ä–∞–±–æ—Ç—ã `<video>` –∏ Canvas).

### 3. üé® Frontend Integration (UI)
- [x] **Profile UI:** –§–æ—Ä–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è S3 —Å –ø—Ä–µ—Å–µ—Ç–∞–º–∏ (Yandex, Selectel, R2) –∏ –∫–Ω–æ–ø–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.
- [x] **Upload Manager:** –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π. –ï—Å–ª–∏ S3 –∞–∫—Ç–∏–≤–µ–Ω -> –≥—Ä—É–∑–∏–º —Ç—É–¥–∞. –ò–Ω–∞—á–µ -> Google Drive.
- [x] **Player:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–∏–¥–µ–æ —Å S3 (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ —á–µ—Ä–µ–∑ API –ø–æ–¥–ø–∏—Å–∏).

### 4. üìö Onboarding & Docs
- [x] **Guides:** –í—Å–ø–ª—ã–≤–∞—é—â–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ "–ì–¥–µ –≤–∑—è—Ç—å Access Key" –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤.
- [ ] **Fallback UI:** –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –µ—Å–ª–∏ S3 –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ Drive.
