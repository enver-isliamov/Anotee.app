
# üöú Anotee Refactoring Roadmap

## üìã –ü–ª–∞–Ω –î–µ–π—Å—Ç–≤–∏–π

## üöÄ –≠—Ç–∞–ø XVII: Architecture Hardening (JWT & Caching)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üí≥ –≠—Ç–∞–ø XVIII: Billing & Admin Infrastructure
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω (–ÆKassa + Prodamus Integrated).**

## üíé –≠—Ç–∞–ø XIX: Final Stabilization & Release Polish
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üß™ –≠—Ç–∞–ø XX: Automated Testing & QA Infrastructure
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**
*   –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `TestRunner.tsx`.
*   –ü–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏: API, Auth, Media, Math, Storage, Billing.
*   –î–æ—Å—Ç—É–ø–µ–Ω –º–∞—Ä—à—Ä—É—Ç `/test`.

## ‚öôÔ∏è –≠—Ç–∞–ø XXI: Dynamic Configuration & Versioning
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**
*   –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `useAppVersion` —Ö—É–∫.
*   –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ –ê–¥–º–∏–Ω–∫–∏.
*   –•—Ä–∞–Ω–µ–Ω–∏–µ Feature Flags –∏ Payment Config –≤ PostgreSQL (`system_settings`).

## üá∑üá∫ –≠—Ç–∞–ø XXII: –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –†–§ (RF Resilience)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω (Cloudflare Configured)**

## üì¶ –≠—Ç–∞–ø XXIII: BYOS (Bring Your Own Storage) & S3
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω (Yandex/Selectel/R2 Supported).**

## üë• –≠—Ç–∞–ø XXIV: S3 –¥–ª—è –ö–æ–º–∞–Ω–¥ (Team Access Stabilization)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üîê –≠—Ç–∞–ø XXV: –†–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –î–æ—Å—Ç—É–ø–∞ (Asset Sandboxing)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**
*   –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `restrictedAssetId`.
*   –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —à–µ—Ä–∏–Ω–≥ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –±–µ–∑ –¥–æ—Å—Ç—É–ø–∞ –∫–æ –≤—Å–µ–º—É –ø—Ä–æ–µ–∫—Ç—É.

## üõ† –≠—Ç–∞–ø XXVIII: Admin Panel Refactoring & Security (RBAC)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**
*   **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å:** –ê–¥–º–∏–Ω–∫–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Ç–∞–±—ã (`AdminUsersTab`, `AdminFeaturesTab`, `AdminPaymentsTab`).
*   **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ü–æ–ª–Ω—ã–π –æ—Ç–∫–∞–∑ –æ—Ç —Ö–∞—Ä–¥–∫–æ–¥–∞ email-–∞–¥—Ä–µ—Å–æ–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.
*   **RBAC:** –í–Ω–µ–¥—Ä–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π —á–µ—Ä–µ–∑ `Clerk Public Metadata` (`role: 'superadmin' | 'admin'`).
*   **Payment Editor:** –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä —Ç–∞—Ä–∏—Ñ–æ–≤ –∏ —à–ª—é–∑–æ–≤.

## üöÄ –≠—Ç–∞–ø XXX: Instant Start (Large File Core)
**–°—Ç–∞—Ç—É—Å:** üìÖ **–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ**
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏ –ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ (50–ì–±+) –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ —Å –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º.

### 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ "–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞" (Optimistic UI)
*   **Local Blob Preview:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `useUploadManager.ts` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `URL.createObjectURL(file)` —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞.
*   **Zero Latency:** –í–∏–¥–µ–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (0 —Å–µ–∫—É–Ω–¥ –∑–∞–¥–µ—Ä–∂–∫–∏). –î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ –ø–∞—É–∑—ã, –ø–æ–∫–∞ –∏–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞ –≤ –æ–±–ª–∞–∫–æ.

### 2. –ó–∞—â–∏—Ç–∞ "–ì–∏–≥–∞–Ω—Ç—Å–∫–∏—Ö –∑–∞–≥—Ä—É–∑–æ–∫" (Resilience)
*   **Infinity Timeout:** –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `xhr.timeout = 0` –≤ `services/googleDrive.ts`. –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ–±—Ä—ã–≤ –∑–∞–≥—Ä—É–∑–∫–∏ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ (50GB+) –±—Ä–∞—É–∑–µ—Ä–æ–º.
*   **Tab Close Protection:** –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª—É—à–∞—Ç–µ–ª—è `beforeunload` –≤ `useUploadManager.ts` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –≤–∫–ª–∞–¥–∫–∏ –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏.

### 3. Visual Feedback & UX
*   **Asset Binding:** –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è `tempAssetId` –≤ `types.ts` –¥–ª—è —Å–≤—è–∑—ã–≤–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–æ–π –∞—Å—Å–µ—Ç–∞.
*   **Non-blocking Overlay:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `ProjectView.tsx` ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ–≤–µ—Ä—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏, –∞ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤–µ—Å—å —ç–∫—Ä–∞–Ω.

### 4. Seamless Swap (–ë–µ—Å—à–æ–≤–Ω–∞—è –ø–æ–¥–º–µ–Ω–∞)
*   **State Reconciliation:** –õ–æ–≥–∏–∫–∞ –∑–∞–º–µ–Ω—ã –≤—Ä–µ–º–µ–Ω–Ω–æ–π `blob:` —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π `googleDriveId` –∏–ª–∏ `s3Key` –ø–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 100% –∑–∞–≥—Ä—É–∑–∫–∏.
*   **Background Sync:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞ –≤ –ë–î –±–µ–∑ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ "–º–æ—Ä–≥–∞–Ω–∏—è" –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## ‚ö°Ô∏è –≠—Ç–∞–ø XXIX: Realtime & P2P Engine (Cloudflare Stack)
**–°—Ç–∞—Ç—É—Å:** üìÖ **–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ**

–≠—Ç–æ—Ç —ç—Ç–∞–ø –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç Anotee –∏–∑ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø–ª–µ–µ—Ä–∞ –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —Å—Ç—É–¥–∏—é —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

### 1. Core Streaming & Transfer
*   **NLE Live Link (Go Live):** –°—Ç—Ä–∏–º–∏–Ω–≥ —ç–∫—Ä–∞–Ω–∞ –º–æ–Ω—Ç–∞–∂–µ—Ä–∞ (Premiere/Resolve) –∫–ª–∏–µ–Ω—Ç—É.
    *   *Tech:* Cloudflare RealtimeKit (SFU) –¥–ª—è WebRTC low-latency (<200ms).
*   **Anotee Drop (P2P):** –ü–µ—Ä–µ–¥–∞—á–∞ —Ç—è–∂–µ–ª—ã—Ö —Ñ–∞–π–ª–æ–≤ (RAW/ProRes) –Ω–∞–ø—Ä—è–º—É—é –º–µ–∂–¥—É –±—Ä–∞—É–∑–µ—Ä–∞–º–∏.
    *   *Tech:* WebRTC Data Channels + Cloudflare TURN Service (–æ–±—Ö–æ–¥ NAT/Firewalls).

### 2. Synchronous Collaboration (Co-Watching)
*   **Sync Playback:** –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Play/Pause/Seek –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å–µ—Å—Å–∏–∏.
*   **Live Presence:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫—É—Ä—Å–æ—Ä–æ–≤ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø–æ–≤–µ—Ä—Ö –≤–∏–¥–µ–æ ("–ø–æ–∫–∞–∂–∏ –º—ã—à–∫–æ–π, –≥–¥–µ –ø–æ–ø—Ä–∞–≤–∏—Ç—å").
*   **Live Telestrator:** –†–∏—Å–æ–≤–∞–Ω–∏–µ –ø–æ–≤–µ—Ä—Ö –≤–∏–¥–µ–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–∏—Å—á–µ–∑–∞—é—â–∏–µ –ª–∏–Ω–∏–∏).
    *   *Tech:* WebRTC Data Channels (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π).

### 3. Audio & Studio Tools
*   **Voice Over IP:** –ì–æ–ª–æ—Å–æ–≤–æ–π —á–∞—Ç –≤–Ω—É—Ç—Ä–∏ —Å–µ—Å—Å–∏–∏ (–∑–∞–º–µ–Ω–∞ Zoom/Telegram –∑–≤–æ–Ω–∫–æ–≤).
*   **Remote ADR:** –£–¥–∞–ª–µ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å –æ–∑–≤—É—á–∫–∏ (–¥–∏–∫—Ç–æ—Ä –≥–æ–≤–æ—Ä–∏—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ -> —Ñ–∞–π–ª –ø–∏—à–µ—Ç—Å—è –≤ –ø—Ä–æ–µ–∫—Ç).
    *   *Tech:* High-quality Audio Stream via SFU.

### 4. Infrastructure & Integrations
*   **Render Status Stream:** –î–µ—Å–∫—Ç–æ–ø-–∞–≥–µ–Ω—Ç —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å —Ä–µ–Ω–¥–µ—Ä–∞ –∏–∑ DaVinci –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
*   **Secure Tunnel:** –î–æ—Å—Ç—É–ø –∫ –ª–æ–∫–∞–ª—å–Ω—ã–º –º–µ–¥–∏–∞-—Å–µ—Ä–≤–µ—Ä–∞–º —Å—Ç—É–¥–∏–∏ –±–µ–∑ VPN (Cloudflare Tunnel).

## üé® –≠—Ç–∞–ø XXVI: Visual Collaboration (Canvas Annotations)
**–°—Ç–∞—Ç—É—Å:** üìÖ **–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ (Next Priority)**
*   –†–∏—Å–æ–≤–∞–Ω–∏–µ –ø–æ–≤–µ—Ä—Ö –≤–∏–¥–µ–æ (—Å—Ç—Ä–µ–ª–∫–∏, –∫—Ä—É–≥–∏).
*   –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ä–∏—Å—É–Ω–∫–∞ —Å —Ç–∞–π–º–∫–æ–¥–æ–º.
*   –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π –≤ JSON.

## ü§ñ –≠—Ç–∞–ø XXVII: AI Agents & Automation
**–°—Ç–∞—Ç—É—Å:** üìÖ **–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ**
*   Auto-Summary —á–∞—Ç–∞ (LLM Integration).
*   –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—É–±—Ç–∏—Ç—Ä–æ–≤ (Server-side Whisper).
