
# üöú SmoTree Refactoring Roadmap

## üìã –ü–ª–∞–Ω –î–µ–π—Å—Ç–≤–∏–π

## üöÄ –≠—Ç–∞–ø VII: SaaS –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Contextual Permissions)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üöë –≠—Ç–∞–ø VIII: –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –∏ –û—á–∏—Å—Ç–∫–∞ (Security Cleanup)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üõë –≠—Ç–∞–ø IX: Critical Refactoring & Bug Fixes (–ó–∞–≤–µ—Ä—à–µ–Ω)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üíÄ –≠—Ç–∞–ø X: Technical Debt & Critical Fixes (–ó–∞–≤–µ—Ä—à–µ–Ω)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

---

## üßπ –≠—Ç–∞–ø XI: Logic Holes & Dead Code Cleanup (–¢–µ–∫—É—â–∏–π)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω**

–í—ã—è–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–µ—Å—Ç—ã–∫–æ–≤–∫–∏ –ª–æ–≥–∏–∫–∏ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ—à–∏–±–∫–∏, —Ç—Ä–µ–±—É—é—â–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

### 1. üö´ –õ–æ–≥–∏—á–µ—Å–∫–∏–π —Ç—É–ø–∏–∫: –†–µ–¥–∞–∫—Ç–æ—Ä—ã –≤ –õ–∏—á–Ω—ã—Ö –ü—Ä–æ–µ–∫—Ç–∞—Ö
- [x] **–ü—Ä–æ–±–ª–µ–º–∞:** –í Personal Workspace –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç UI –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ `team` –ø–æ Email.
- [x] **–°–ª–µ–¥—Å—Ç–≤–∏–µ:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –¥–∞—Ç—å –ø—Ä–∞–≤–∞ **–†–µ–¥–∞–∫—Ç–æ—Ä–∞** –∫–æ–ª–ª–µ–≥–µ –≤ –ª–∏—á–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ. –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ "Public Access" (—Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä).
- [x] **–†–µ—à–µ–Ω–∏–µ:** –õ–∏—á–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –æ–±—ä—è–≤–ª–µ–Ω—ã "Solo Only". –î–ª—è –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–∏ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é. UI –æ–±–Ω–æ–≤–ª–µ–Ω –≤ `ProjectView.tsx` —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π.

### 2. üêõ –ë–∞–≥: –°–±—Ä–æ—Å –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- [x] **–ü—Ä–æ–±–ª–µ–º–∞:** `Player.tsx` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `localFileUrl` –≤ —Å—Ç–µ–π—Ç –ø—Ä–æ–µ–∫—Ç–∞. `apiClient.ts` –≤—ã—Ä–µ–∑–∞–µ—Ç –µ–≥–æ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π. –ü–æ–ª–ª–∏–Ω–≥ –∑–∞—Ç–∏—Ä–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏.
- [x] **–†–µ—à–µ–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω Smart Merge –≤ `App.tsx` -> `fetchCloudData`, –∫–æ—Ç–æ—Ä—ã–π –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `localFileUrl` –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å—Ç–µ–π—Ç–∞.

### 3. üõ°Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∞–≤: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
- [x] **–ü—Ä–æ–±–ª–µ–º–∞:** `api/delete.js` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ –¢–û–õ–¨–ö–û –≤–ª–∞–¥–µ–ª—å—Ü—É (`owner_id`).
- [x] **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ `org:admin` —á–µ—Ä–µ–∑ Clerk Backend API.

### 4. üßü‚Äç‚ôÇÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ –º–µ—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞
- [x] **–ó–∞–¥–∞—á–∞:** –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª—ã, –æ—Ç –∫–æ—Ç–æ—Ä—ã—Ö –º—ã –æ—Ç–∫–∞–∑–∞–ª–∏—Å—å –≤ –ø–æ–ª—å–∑—É Clerk:
    - `api/guest.js` (Legacy Guest Auth)
    - `api/join.js` (Legacy Invite System)

### 5. üìâ –†–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω –ê–≤–∞—Ç–∞—Ä–æ–∫ (Stale Data)
- [x] **–ü—Ä–æ–±–ª–µ–º–∞:** –í –ª–∏—á–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö –º–∞—Å—Å–∏–≤ `team` —Ö—Ä–∞–Ω–∏—Ç –∫–æ–ø–∏—é –¥–∞–Ω–Ω—ã—Ö —é–∑–µ—Ä–∞.
- [x] **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ "Solo Only" –¥–ª—è –ª–∏—á–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø—Ä–æ–±–ª–µ–º–∞ –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü, –¥–∞–Ω–Ω—ã–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–Ω–æ –±—Ä–∞—Ç—å –∏–∑ Clerk). –î–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `useOrganization`.
