
# üöú Anotee Refactoring Roadmap

## üìã –ü–ª–∞–Ω –î–µ–π—Å—Ç–≤–∏–π

## üöÄ –≠—Ç–∞–ø VII: SaaS –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Contextual Permissions)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üöë –≠—Ç–∞–ø VIII: –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –∏ –û—á–∏—Å—Ç–∫–∞ (Security Cleanup)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üõë –≠—Ç–∞–ø IX: Critical Refactoring & Bug Fixes (–ó–∞–≤–µ—Ä—à–µ–Ω)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üíÄ –≠—Ç–∞–ø X: Technical Debt & Critical Fixes (–ó–∞–≤–µ—Ä—à–µ–Ω)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üßπ –≠—Ç–∞–ø XI: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –î—ã—Ä
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üõ°Ô∏è –≠—Ç–∞–ø XII: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## ü©π –≠—Ç–∞–ø XIII: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø–æ–ª–∏—Ä–æ–≤–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üèóÔ∏è –≠—Ç–∞–ø XIV: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ß–∏—Å—Ç–∫–∞ –∏ –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –ü–ª–µ–µ—Ä–∞
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üö¶ –≠—Ç–∞–ø XV: User Onboarding & Workflow
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üêõ –≠—Ç–∞–ø XVI: Fixes & Critical Stabilization
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üöÄ –≠—Ç–∞–ø XVII: Architecture Hardening (JWT & Caching)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- ‚úÖ **SWR Integration:** –í–Ω–µ–¥—Ä–µ–Ω `useSWR` –≤ `App.tsx` –¥–ª—è —É–º–Ω–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ñ–æ–Ω–æ–≤–æ–π —Ä–µ–≤–∞–ª–∏–¥–∞—Ü–∏–∏.
- ‚úÖ **JWT Claims:** `api/_auth.js` —Ç–µ–ø–µ—Ä—å —á–∏—Ç–∞–µ—Ç email –Ω–∞–ø—Ä—è–º—É—é –∏–∑ —Ç–æ–∫–µ–Ω–∞ (Zero-Latency).
- ‚úÖ **Mobile Polish:** –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–≤–∞–π–ø—ã –≤ `Player.tsx` –∏ —É–ª—É—á—à–µ–Ω–∞ –≤–µ—Ä—Å—Ç–∫–∞ –¥–ª—è —Ç–∞—á-—É—Å—Ç—Ä–æ–π—Å—Ç–≤.

## üé® –≠—Ç–∞–ø XVIII: Visual Collaboration (Annotations)
**–°—Ç–∞—Ç—É—Å:** üõë **–ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥)**

–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∏—Å–æ–≤–∞—Ç—å –ø–æ–≤–µ—Ä—Ö –≤–∏–¥–µ–æ (–∫–∞–∫ –≤ Frame.io). –≠—Ç–æ –∫–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø—Ä–æ—Å—Ç—ã—Ö –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–≤.

### 1. üñåÔ∏è Canvas Overlay System
- [ ] **Component:** –°–æ–∑–¥–∞—Ç—å —Å–ª–æ–π `AnnotationCanvas` –ø–æ–≤–µ—Ä—Ö `<video>`.
- [ ] **Logic:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∏—Å–æ–≤–∞–Ω–∏–µ –∫—Ä–∏–≤—ã—Ö –ë–µ–∑—å–µ (Freehand drawing).
- [ ] **Responsiveness:** –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (0..1), —á—Ç–æ–±—ã —Ä–∏—Å—É–Ω–æ–∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–ª—Å—è –≤–º–µ—Å—Ç–µ —Å –≤–∏–¥–µ–æ.

### 2. üíæ Data Persistence
- [ ] **Types:** –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Comment` (–¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `drawingData`).
- [ ] **DB:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `jsonb` –≤ Postgres –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–∞—Å—Å–∏–≤—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç.
- [ ] **Player UI:** –ö–Ω–æ–ø–∫–∞ "–ö–∞—Ä–∞–Ω–¥–∞—à" (Draw Mode) –≤ –∫–æ–Ω—Ç—Ä–æ–ª–∞—Ö –ø–ª–µ–µ—Ä–∞.

### 3. üëÅÔ∏è Playback Experience
- [ ] **Ghosting:** –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–∏—Å—É–Ω–æ–∫ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø–ª–µ–µ—Ä –Ω–∞ –ø–∞—É–∑–µ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –∫–∞–¥—Ä–µ (–∏–ª–∏ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ +/- 1 —Å–µ–∫—É–Ω–¥–∞).
- [ ] **Thumbnails:** –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∏–Ω–∏-–ø—Ä–µ–≤—å—é —Ä–∏—Å—É–Ω–∫–∞ –≤ —Å–ø–∏—Å–∫–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.

## ü§ñ –≠—Ç–∞–ø XIX: AI Agents & Automation
**–°—Ç–∞—Ç—É—Å:** üìÖ **–í –ø–ª–∞–Ω–∞—Ö**

- [ ] **AI Summary:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF-–æ—Ç—á–µ—Ç–∞ —Å –ø—Ä–∞–≤–∫–∞–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —á–∞—Ç–∞.
- [ ] **Smart Tags:** –ê–≤—Ç–æ-—Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤).
