
# üöú Anotee Refactoring Roadmap

## üìã –ü–ª–∞–Ω –î–µ–π—Å—Ç–≤–∏–π

## üöÄ –≠—Ç–∞–ø VII: SaaS –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Contextual Permissions)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üöë –≠—Ç–∞–ø VIII: –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –∏ –û—á–∏—Å—Ç–∫–∞ (Security Cleanup)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üõë –≠—Ç–∞–ø IX: Critical Refactoring & Bug Fixes (–ó–∞–≤–µ—Ä—à–µ–Ω)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üíÄ –≠—Ç–∞–ø X: Technical Debt & Critical Fixes (–ó–∞–≤–µ—Ä—à–µ–Ω)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üßπ –≠—Ç–∞–ø XI: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –î—ã—Ä
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üõ°Ô∏è –≠—Ç–∞–ø XII: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## ü©π –≠—Ç–∞–ø XIII: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø–æ–ª–∏—Ä–æ–≤–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üèóÔ∏è –≠—Ç–∞–ø XIV: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ß–∏—Å—Ç–∫–∞ –∏ –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –ü–ª–µ–µ—Ä–∞
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üö¶ –≠—Ç–∞–ø XV: User Onboarding & Workflow
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üêõ –≠—Ç–∞–ø XVI: Fixes & Critical Stabilization
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üöÄ –≠—Ç–∞–ø XVII: Architecture Hardening (JWT & Caching)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–µ–Ω.**

## üíé –≠—Ç–∞–ø XVIII: Final Stabilization & Release Polish
**–°—Ç–∞—Ç—É—Å:** üõë **–ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–¢–µ–∫—É—â–∏–π —Ñ–æ–∫—É—Å)**

–¶–µ–ª—å: –ü—Ä–∏–≤–µ—Å—Ç–∏ —Ç–µ–∫—É—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (–ó–∞–≥—Ä—É–∑–∫–∞, –ü–ª–µ–µ—Ä, –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, Drive) –∫ –∏–¥–µ–∞–ª—å–Ω–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏. –ù–∏–∫–∞–∫–∏—Ö –Ω–æ–≤—ã—Ö —Ñ–∏—á, —Ç–æ–ª—å–∫–æ –∫–∞—á–µ—Å—Ç–≤–æ.

### 1. üîç Deep Audit & Bug Hunting
- [ ] **Player Resilience:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ–µ–≤ —Å–µ—Ç–∏ –≤–æ –≤—Ä–µ–º—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è.
- [ ] **Upload Robustness:** –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ (–ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞, –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã).
- [ ] **Mobile Experience:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Ç–∞—á-–∏–Ω—Ç–µ—Ä–∞–∫—Ü–∏–∏ (—Å–≤–∞–π–ø—ã, –∑—É–º) –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö (iOS/Android).

### 2. ‚ö° Performance Tuning
- [ ] **Render Cycle:** –ò—Å–∫–ª—é—á–∏—Ç—å –ª–∏—à–Ω–∏–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã –≤ `Player.tsx` –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –º—ã—à–∏/—Å–∫—Ä–æ–ª–ª–µ.
- [ ] **Bundle Size:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –∏ lazy-loading –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

### 3. üßπ Code Cleanup
- [ ] **Unused Code:** –£–¥–∞–ª–∏—Ç—å –º–µ—Ä—Ç–≤—ã–π –∫–æ–¥, —Å—Ç–∞—Ä—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–∏–ø—ã.
- [ ] **Consistency:** –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—Ç–∏–ª–µ–π –∫–Ω–æ–ø–æ–∫, –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –∏ –ª–æ–∞–¥–µ—Ä–æ–≤ –ø–æ –≤—Å–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é.

## üß™ –≠—Ç–∞–ø XIX: Automated Testing & QA Infrastructure
**–°—Ç–∞—Ç—É—Å:** üìÖ **–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ**

–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Ä–µ–≥—Ä–µ—Å—Å–∏–π –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º.

### 1. E2E Testing (Playwright/Cypress)
- [ ] **Critical Path:** –ê–≤—Ç–æ—Ç–µ—Å—Ç —Å—Ü–µ–Ω–∞—Ä–∏—è "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è -> –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ -> –ó–∞–≥—Ä—É–∑–∫–∞ -> –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π".
- [ ] **Player Controls:** –¢–µ—Å—Ç —à–æ—Ä—Ç–∫–∞—Ç–æ–≤ (J/K/L, I/O) –∏ —Å–∫—Ä–∞–±–±–∏–Ω–≥–∞.
- [ ] **Mobile View:** –≠–º—É–ª—è—Ü–∏—è —Ç–∞—á-—Å–æ–±—ã—Ç–∏–π –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å—Ç–∫–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ö.

### 2. Unit & Integration Tests
- [ ] **Utils:** –¢–µ—Å—Ç—ã –¥–ª—è `timecodeToFrames`, `generateId`, –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤.
- [ ] **API Security:** –¢–µ—Å—Ç—ã –Ω–∞ –ø–æ–ø—ã—Ç–∫—É –¥–æ—Å—Ç—É–ø–∞ –∫ —á—É–∂–æ–º—É –ø—Ä–æ–µ–∫—Ç—É (–æ–∂–∏–¥–∞–µ—Ç—Å—è 403 Forbidden).

## üìä –≠—Ç–∞–ø XX: Performance & Monitoring
**–°—Ç–∞—Ç—É—Å:** üìÖ **–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ**

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

### 1. Error Tracking & Analytics
- [ ] **Log Monitoring:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ API (Vercel Logs).
- [ ] **Upload Failures:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫.

### 2. Performance Tuning
- [ ] **Lighthouse Score:** –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ Web Vitals (LCP, CLS).
- [ ] **Database Indexing:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤ Postgres –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ç—è–∂–µ–ª—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

## üöÄ –≠—Ç–∞–ø XXI: Production Launch Preparation
**–°—Ç–∞—Ç—É—Å:** üìÖ **–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ**

–§–∏–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –¥–æ—Å—Ç—É–ø–∞ —à–∏—Ä–æ–∫–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏.

- [ ] **Security Audit:** –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (RLS, Storage, API).
- [ ] **Backup Strategy:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –±—ç–∫–∞–ø–æ–≤ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
- [ ] **Legal Compliance:** –ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ñ–µ—Ä—Ç—ã –∏ –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ç–µ–∫—É—â–∏–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º.

## üá∑üá∫ –≠—Ç–∞–ø XXII: –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –†–§ (RF Resilience)
**–°—Ç–∞—Ç—É—Å:** üìÖ **–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)**

–û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –±–µ—Å–ø–µ—Ä–µ–±–æ–π–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –†–æ—Å—Å–∏–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–µ–∫–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π (Vercel + Google Drive).

### 1. üõ°Ô∏è Cloudflare DNS Configuration
- [ ] **–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è:** –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å Cloudflare –≤ —Ä–µ–∂–∏–º **DNS Only** (Grey Cloud) –¥–ª—è –¥–æ–º–µ–Ω–∞.
- [ ] **–ü—Ä–∏—á–∏–Ω–∞:** –û–±—Ö–æ–¥ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ HTTP/3 (QUIC) –∏ –ø—Ä–æ–±–ª–µ–º —Å IPv6 –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–æ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –æ—à–∏–±–∫–∞–º `ERR_CONNECTION_RESET` –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ JS-–±–∞–Ω–¥–ª–æ–≤ —Å Vercel.

### 2. üì° Connectivity Checks
- [ ] **Drive Proxy Validation:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ `api/proxyAudio` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –†–§ (–æ–±—Ö–æ–¥ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∑–∞–º–µ–¥–ª–µ–Ω–∏–π Google API).
- [ ] **Auth Fallback:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Clerk —á–µ—Ä–µ–∑ –º–æ–±–∏–ª—å–Ω—ã–µ —Å–µ—Ç–∏ –†–§ (—É–±–µ–¥–∏—Ç—å—Å—è –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏).
- [ ] **Yookassa Reliability:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤–µ–±—Ö—É–∫–æ–≤ –æ—Ç –ÆK—Å—Å—ã –¥–æ —Å–µ—Ä–≤–µ—Ä–æ–≤ Vercel (—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å Server-to-Server —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è).
